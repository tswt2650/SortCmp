#include <bits/stdc++.h>
#include <fstream>
#include <time.h>
using namespace std;

const int mmm = 1e6 + 10;
long long a[mmm], b[mmm];
int n = 1e6;

void quicksort(int l, int r);              // line 68 -> 88
void heapsort(int n);                      // line 91 -> 130
void mergesort(int l, int r) ;             // line 133 -> 144

void nhap(char x[])
{
    char s[15] = "test";
    strcat(s,x);
    strcat(s,".txt");                            //line 16 -> 18: tao xau s co dang ["test" + x + ".txt"]
    ifstream input (s);
    for (int i = 0; i < mmm; i++) input >> a[i];
    input.close();
}
ofstream output ("result.txt");
void tgtt(char x[])                              //ham tinh va ghi thoi gian thuc hien thuat toan
{
    clock_t bd, kt;
    double time_use;
    bd = clock();
    switch (x[0])
    {
        case 'Q': quicksort(0, n - 1);
        case 'H': heapsort(n);
        case 'M': mergesort(0, n - 1);
        default: sort(a, a + n);
    }
    kt = clock();
    time_use = (double)(kt - bd) / CLOCKS_PER_SEC;
    output << "\t\t" << fixed << setprecision(3) << time_use << "s";
}

int main()
{
    char z[5];
    output << "test\t\tQuickSort\t\tHeapSort\t\tMergeSort\t\tSortInCppLib";
    for (int i = 1; i<=10; i++)
    {
        itoa(i,z,10);
        output << endl << i;

        nhap(z);
        tgtt("Quicksort");

        nhap(z);
        tgtt("HeapSort");

        nhap(z);
        tgtt("MergeSort");

        nhap(z);
        tgtt("SortCpp");
        //for (int i = 0; i < n; i++) output << endl << a[i];
    }
    output.close();
	return 0;
}


void quicksort(int l, int r)
{
    if (l == r) return;
    else
    {
        long long x = a[(l + r)/2];
        int i = l, j = r;
        while (i <= j)
        {
            while(a[i] < x) ++i;
            while(a[j] > x) --j;
            if (i<=j)
            {
                swap(a[i], a[j]);
                i++; j--;
            }
        }
        if (l < j) quicksort(l, j);
        if (r > i) quicksort(i, r);
    }
}


int s;
void upper(int i)
{
    if(i == 1) return;
    if (b[i] < b[i/2])
    {
        swap(b[i], b[i/2]);
        upper(i/2);
    }
}
void lower(int i)
{
    int x = i;
    if (i*2 <= s && b[x] > b[i*2]) x = 2*i;
    if (i*2 + 1 <= s && b[x] > b[i*2 + 1]) x = i*2 + 1;
    if (x != i)
    {
        swap(b[x], b[i]);
        lower(x);
    }
}
void push(int g)
{
    b[s++] = g;
    upper(s);
}
void pop()
{
    b[1] = b[s--];
    lower(1);
}
void heapsort(int n)
{
    for(int i = 0; i < n; i++) push(a[i]);
    for(int i = 0; i < n; i++)
    {
        a[i] = b[1];
        pop();
    }
}


void mergesort(int l, int r)
{
    if (l == r) return;
    else
    {
        int x = (l + r)/2;
        mergesort(l, x);
        mergesort(x + 1, r);
        for(int i = l; i < r + 1; i++) b[i] = a[i];
        merge(b + l, b + x + 1, b + x + 1, b + r + 1, a + l);
    }
}
